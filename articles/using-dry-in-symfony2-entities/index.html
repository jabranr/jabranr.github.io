
  



  

<!doctype html>
<html lang="en" xmlns:fb="http://ogp.me/ns/fb#">
  <head>
    <meta charset="UTF-8" />
    <title>Using DRY concept in Symfony2 Entities - Jabran Rafique</title>
    <meta name="description" content="Full Stack Web Engineer, currently Front-End Tech Lead at Rated People" />
    <meta name="keywords" content="blog, jabran, rafique, html, css, javascript, react, php, full stack, front-end" />
    <meta property="og:type" content="website" />
    <meta property="og:title" content="Using DRY concept in Symfony2 Entities - Jabran Rafique" />
    <meta property="og:description" content="Full Stack Web Engineer, currently Front-End Tech Lead at Rated People" />
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:site" content="@jabranr">
    <meta name="twitter:creator" content="@jabranr">
    <meta name="twitter:title" content="Using DRY concept in Symfony2 Entities - Jabran Rafique">
    <meta name="twitter:description" content="Full Stack Web Engineer, currently Front-End Tech Lead at Rated People">
    <meta property="og:image" content="https://jabran.me/assets/images/icon-1024x1024.png" />
    <meta name="twitter:image" content="https://jabran.me/assets/images/icon-1024x1024.png" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="msapplication-TileImage" content="https://jabran.me/assets/images/apple-touch-icon-114x114.png" />
    <meta name="theme-color" content="#f55555" />
    
      <meta property="robots" content="all" />
      <meta property="og:url" content="https://jabran.me/articles/using-dry-in-symfony2-entities/">
      <link rel="canonical" href="https://jabran.me/articles/using-dry-in-symfony2-entities/" />
    
    <link rel="preconnect" href="https://www.googletagmanager.com" />
    <link rel="preconnect" href="https://www.google-analytics.com" />
    <link rel="manifest" href="https://jabran.me/manifest.json?v=1641577708524" />
    <link rel="icon" type="image/x-icon" href="https://jabran.me/assets/images/favicon.ico" />
    <link rel="apple-touch-icon" href="https://jabran.me/assets/images/apple-touch-icon-114x114.png" />

    <link href="https://jabran.me/assets/css/normalize.css?v=1641577708524" rel="stylesheet" />
    <link href="https://unpkg.com/prismjs@1.20.0/themes/prism-okaidia.css" rel="preload" as="style" onload="this.onload=null;this.rel='stylesheet'">
    <noscript><link href="https://unpkg.com/prismjs@1.20.0/themes/prism-okaidia.css" rel="stylesheet"></noscript>
    <link href="https://jabran.me/assets/css/styles.css?v=1641577708524" rel="stylesheet" />


    <!-- Google Tag Manager -->
    <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
    new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
    j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
    'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
    })(window,document,'script','dataLayer','GTM-MHKHDT');</script>
    <!-- End Google Tag Manager -->
  </head>
  <body>
    <!-- Google Tag Manager (noscript) -->
    <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-MHKHDT"
    height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
    <!-- End Google Tag Manager (noscript) -->
    
    <div class="wrapper">
      <header class="header container-fluid">
        <section class="container header_inner">
          
            <a class="h1 logo" href="/">Jabran Rafique</a>
          
        </section>
      </header>
      <main class="main">



<section class="container breadcrumbs">
  <a href="/">Home</a> &rsaquo; <a href="/articles/">Articles</a>
</section>

<section class="container-fluid">
  <section class="container post">
    <h1 class="article_header underlined">Using DRY concept in Symfony2 Entities</h1>
    <time datetime="2016-07-25" class="article_time">
      July 25, 2016 &bull; 6 minutes read
    </time>
    <section class="article_content">
      <div class="ads">
        <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-4297681002419123" crossorigin="anonymous"></script>
        <!-- Banner ad -->
        <ins class="adsbygoogle"
             style="display:block"
             data-ad-client="ca-pub-4297681002419123"
             data-ad-slot="6682049184"
             data-ad-format="auto"
             data-full-width-responsive="true"></ins>
        <script>(adsbygoogle = window.adsbygoogle || []).push({});</script>
      </div>
      <p class="lead">This is an effort to make Symfony2 workflow (bit more) DRY where Entities are mapped with Doctrine ORM.</p>
<p>Such mapped entities sometimes share same attributes between them i.e. <code>id</code>, <code>timestamps</code> etc. In order to use <a href="https://en.wikipedia.org/wiki/Don%27t_repeat_yourself">DRY concept</a> here we can create a base entity and then every new entity can extend it to share those attributes. Let's start by creating two entities with repeated attributes.</p>
<blockquote>
<p>An Entity is simply a PHP class.</p>
</blockquote>
<p>Here are two Entities <code>User</code> and <code>Address</code>, and they are structured as following:</p>
<pre class="language-php"><code class="language-php"><span class="token php language-php"><span class="token delimiter important">&lt;?php</span> <span class="token keyword">namespace</span> <span class="token package">Foo<span class="token punctuation">\</span>Bar<span class="token punctuation">\</span>Entity</span><span class="token punctuation">;</span><br><br>  <span class="token keyword">use</span> <span class="token package">Doctrine<span class="token punctuation">\</span>ORM<span class="token punctuation">\</span>Mapping</span> <span class="token keyword">as</span> <span class="token constant">ORM</span><span class="token punctuation">;</span><br><br>  <span class="token comment">/**<br>   * @ORM\Entity<br>   * @ORM\Table(name="app_user")<br>   */</span><br>  <span class="token keyword">class</span> <span class="token class-name-definition class-name">User</span> <span class="token punctuation">{</span><br><br>    <span class="token comment">/**<br>     * @ORM\Column(name="id", type="integer")<br>     * @ORM\Id<br>     * @ORM\GeneratedValue(strategy="AUTO")<br>     */</span><br>    <span class="token keyword">private</span> <span class="token variable">$id</span><span class="token punctuation">;</span><br><br>    <span class="token comment">/**<br>     * @ORM\Column(name="name", type="string", length=255)<br>     */</span><br>    <span class="token keyword">private</span> <span class="token variable">$name</span><span class="token punctuation">;</span><br><br>    <span class="token comment">/**<br>     * @ORM\Column(name="email", type="string", length=255)<br>     */</span><br>    <span class="token keyword">private</span> <span class="token variable">$email</span><span class="token punctuation">;</span><br><br>    <span class="token comment">/**<br>     * @ORM\Column(name="createdAt", type="datetime")<br>     */</span><br>    <span class="token keyword">private</span> <span class="token variable">$createdAt</span><span class="token punctuation">;</span><br><br>    <span class="token comment">/**<br>     * @ORM\Column(name="updatedAt", type="datetime")<br>     */</span><br>    <span class="token keyword">private</span> <span class="token variable">$updatedAt</span><span class="token punctuation">;</span><br><br>    <span class="token operator">...</span><br>    <span class="token comment">// getter setters</span><br>  <span class="token punctuation">}</span></code></pre>
<p>Here is the <code>Address</code> entity class.</p>
<pre class="language-php"><code class="language-php"><span class="token php language-php"><span class="token delimiter important">&lt;?php</span> <span class="token keyword">namespace</span> <span class="token package">Foo<span class="token punctuation">\</span>Bar<span class="token punctuation">\</span>Entity</span><span class="token punctuation">;</span><br><br>  <span class="token keyword">use</span> <span class="token package">Doctrine<span class="token punctuation">\</span>ORM<span class="token punctuation">\</span>Mapping</span> <span class="token keyword">as</span> <span class="token constant">ORM</span><span class="token punctuation">;</span><br><br>  <span class="token comment">/**<br>   * @ORM\Entity<br>   * @ORM\Table(name="app_address")<br>   */</span><br>  <span class="token keyword">class</span> <span class="token class-name-definition class-name">Address</span> <span class="token punctuation">{</span><br><br>    <span class="token comment">/**<br>     * @ORM\Column(name="id", type="integer")<br>     * @ORM\Id<br>     * @ORM\GeneratedValue(strategy="AUTO")<br>     */</span><br>    <span class="token keyword">private</span> <span class="token variable">$id</span><span class="token punctuation">;</span><br><br>    <span class="token comment">/**<br>     * @ORM\Column(name="property", type="string", length=255)<br>     */</span><br>    <span class="token keyword">private</span> <span class="token variable">$property</span><span class="token punctuation">;</span><br><br>    <span class="token comment">/**<br>     * @ORM\Column(name="street", type="string", length=255)<br>     */</span><br>    <span class="token keyword">private</span> <span class="token variable">$street</span><span class="token punctuation">;</span><br><br>    <span class="token comment">/**<br>     * @ORM\Column(name="town", type="string", length=255)<br>     */</span><br>    <span class="token keyword">private</span> <span class="token variable">$town</span><span class="token punctuation">;</span><br><br>    <span class="token comment">/**<br>     * @ORM\Column(name="createdAt", type="datetime")<br>     */</span><br>    <span class="token keyword">private</span> <span class="token variable">$createdAt</span><span class="token punctuation">;</span><br><br>    <span class="token comment">/**<br>     * @ORM\Column(name="updatedAt", type="datetime")<br>     */</span><br>    <span class="token keyword">private</span> <span class="token variable">$updatedAt</span><span class="token punctuation">;</span><br><br>    <span class="token operator">...</span><br>    <span class="token comment">// getter setters</span><br>  <span class="token punctuation">}</span></code></pre>
<p>As you can see that we have <code>id</code>, <code>createdAt</code> and <code>updatedAt</code> attributes that are being repeated in both entities. To implement a DRY concept here we are going to create a new entity class that will have the shared/repeated attributes and then can be extended by other entities.</p>
<p>Let's create a <code>BaseEntity</code> class and move the repeated values to it.</p>
<pre class="language-php"><code class="language-php"><span class="token php language-php"><span class="token delimiter important">&lt;?php</span> <span class="token keyword">namespace</span> <span class="token package">Foo<span class="token punctuation">\</span>Bar<span class="token punctuation">\</span>Entity</span><span class="token punctuation">;</span><br><br><span class="token keyword">use</span> <span class="token package">Doctrine<span class="token punctuation">\</span>ORM<span class="token punctuation">\</span>Mapping</span> <span class="token keyword">as</span> <span class="token constant">ORM</span><span class="token punctuation">;</span><br><br><span class="token comment">/**<br> * @ORM\MappedSuperclass<br> */</span><br><span class="token keyword">class</span> <span class="token class-name-definition class-name">BaseEntity</span> <span class="token punctuation">{</span><br><br>    <span class="token comment">/**<br>     * @ORM\Id<br>     * @ORM\Column(name="id", type="integer")<br>     * @ORM\GeneratedValue(strategy="AUTO")<br>     */</span><br>    <span class="token keyword">private</span> <span class="token variable">$id</span><span class="token punctuation">;</span><br><br>    <span class="token comment">/**<br>     * @ORM\Column(name="created_at", type="datetime")<br>     */</span><br>    <span class="token keyword">private</span> <span class="token variable">$createdAt</span><span class="token punctuation">;</span><br><br>    <span class="token comment">/**<br>     * @ORM\Column(name="updated_at", type="datetime")<br>     */</span><br>    <span class="token keyword">private</span> <span class="token variable">$updatedAt</span><span class="token punctuation">;</span><br><br>    <span class="token operator">...</span><br>    <span class="token comment">// getters setters</span></code></pre>
<p>Note a new annotation <code>@ORM\MappedSuperclass</code> at top of the <code>BaseEntity</code> that makes sure that attributes in this entity are properly extended into sub-entities. Now we can remove these attributes from <code>User</code> and <code>Address</code> entities and extend our <code>BaseEntity</code> class into these.</p>
<pre class="language-php"><code class="language-php"><span class="token php language-php"><span class="token delimiter important">&lt;?php</span> <span class="token keyword">namespace</span> <span class="token package">Foo<span class="token punctuation">\</span>Bar<span class="token punctuation">\</span>Entity</span><span class="token punctuation">;</span><br><br>  <span class="token keyword">use</span> <span class="token package">Doctrine<span class="token punctuation">\</span>ORM<span class="token punctuation">\</span>Mapping</span> <span class="token keyword">as</span> <span class="token constant">ORM</span><span class="token punctuation">;</span><br><br>  <span class="token comment">/**<br>   * @ORM\Entity<br>   * @ORM\Table(name="app_user")<br>   */</span><br>  <span class="token keyword">class</span> <span class="token class-name-definition class-name">User</span> <span class="token keyword">extends</span> <span class="token class-name">BaseEntity</span> <span class="token punctuation">{</span><br><br>    <span class="token comment">/**<br>     * @ORM\Column(name="name", type="string", length=255)<br>     */</span><br>    <span class="token keyword">private</span> <span class="token variable">$name</span><span class="token punctuation">;</span><br><br>    <span class="token comment">/**<br>     * @ORM\Column(name="email", type="string", length=255)<br>     */</span><br>    <span class="token keyword">private</span> <span class="token variable">$email</span><span class="token punctuation">;</span><br><br>    <span class="token operator">...</span><br>    <span class="token comment">// getter setters</span><br>  <span class="token punctuation">}</span></code></pre>
<pre class="language-php"><code class="language-php"><span class="token php language-php"><span class="token delimiter important">&lt;?php</span> <span class="token keyword">namespace</span> <span class="token package">Foo<span class="token punctuation">\</span>Bar<span class="token punctuation">\</span>Entity</span><span class="token punctuation">;</span><br><br>  <span class="token keyword">use</span> <span class="token package">Doctrine<span class="token punctuation">\</span>ORM<span class="token punctuation">\</span>Mapping</span> <span class="token keyword">as</span> <span class="token constant">ORM</span><span class="token punctuation">;</span><br><br>  <span class="token comment">/**<br>   * @ORM\Entity<br>   * @ORM\Table(name="app_address")<br>   */</span><br>  <span class="token keyword">class</span> <span class="token class-name-definition class-name">Address</span> <span class="token keyword">extends</span> <span class="token class-name">BaseEntity</span> <span class="token punctuation">{</span><br><br>    <span class="token comment">/**<br>     * @ORM\Column(name="property", type="string", length=255)<br>     */</span><br>    <span class="token keyword">private</span> <span class="token variable">$property</span><span class="token punctuation">;</span><br><br>    <span class="token comment">/**<br>     * @ORM\Column(name="street", type="string", length=255)<br>     */</span><br>    <span class="token keyword">private</span> <span class="token variable">$street</span><span class="token punctuation">;</span><br><br>    <span class="token comment">/**<br>     * @ORM\Column(name="town", type="string", length=255)<br>     */</span><br>    <span class="token keyword">private</span> <span class="token variable">$town</span><span class="token punctuation">;</span><br><br>    <span class="token operator">...</span><br>    <span class="token comment">// getter setters</span><br>  <span class="token punctuation">}</span></code></pre>
<p>Our entities are already started to look cleaner.</p>
<p>Now since we have some shared attributes in one entity, this gives us flexibility to add further enhancements to it as required.</p>
<p>Let's add some automation to make sure that both timestamps <code>createdAt</code> and <code>updatedAt</code> are properly set before we persist or update the records to our database. For that we will use <code>@ORM\PrePersist</code> and <code>@ORM\PreUpdate</code> annotations in custom methods. We also need an additional annotation <code>@ORM\HasLifecycleCallbacks</code> at class root level.</p>
<pre class="language-php"><code class="language-php"><span class="token php language-php"><span class="token delimiter important">&lt;?php</span> <span class="token keyword">namespace</span> <span class="token package">Foo<span class="token punctuation">\</span>Bar<span class="token punctuation">\</span>Entity</span><span class="token punctuation">;</span><br><br><span class="token keyword">use</span> <span class="token package">Doctrine<span class="token punctuation">\</span>ORM<span class="token punctuation">\</span>Mapping</span> <span class="token keyword">as</span> <span class="token constant">ORM</span><span class="token punctuation">;</span><br><br><span class="token comment">/**<br> * @ORM\HasLifecycleCallbacks<br> * @ORM\MappedSuperclass<br> */</span><br><span class="token keyword">class</span> <span class="token class-name-definition class-name">BaseEntity</span> <span class="token punctuation">{</span><br>    <span class="token operator">...</span><br><br>    <span class="token comment">/**<br>     * @ORM\PrePersist<br>     */</span><br>    <span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function-definition function">setTimestamps</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>      <span class="token variable">$this</span><span class="token operator">-></span><span class="token property">createdAt</span> <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name class-name-fully-qualified"><span class="token punctuation">\</span>DateTime</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>      <span class="token variable">$this</span><span class="token operator">-></span><span class="token property">updatedAt</span> <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name class-name-fully-qualified"><span class="token punctuation">\</span>DateTime</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>    <span class="token punctuation">}</span><br><br>    <span class="token comment">/**<br>     * @ORM\PreUpdate<br>     */</span><br>    <span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function-definition function">setUpdatedTimestamp</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>      <span class="token variable">$this</span><span class="token operator">-></span><span class="token property">updatedAt</span> <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name class-name-fully-qualified"><span class="token punctuation">\</span>DateTime</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>    <span class="token punctuation">}</span><br><br>    <span class="token operator">...</span></code></pre>
<p>Now we have two additional custom methods, <code>setTimestamps</code> and <code>setUpdatedTimestamp</code>. The names for these methods do not really matter so we can name those as we want. First method sets the values for <code>createdAt</code> and <code>updatedAt</code> attributes just before we <strong>persist a new record</strong> to database. We set the values as <code>DateTime</code> object and Symfony2/Doctrine will automatically convert those to required format for database entry. Second method only updates the <code>updatedAt</code> value when a database <strong>record is updated</strong>.</p>
<blockquote>
<p>We can simply extend the <code>BaseEntity</code> to any entity and need not worry about generating a primary key attribute (<code>id</code>) and timestamps now on.</p>
</blockquote>
<h3>Additional enhancements:</h3>
<p>We can have as many as enhancement we like to the <code>BaseEntity</code> and those will be automatically extended to sub-entities. For example we can have a <code>save</code> method to persist the record by keeping all logic in <code>BaseEntity</code> instead of a controller. In current situation if we are creating a user we will use following steps inside a controller:</p>
<pre class="language-php"><code class="language-php"><span class="token php language-php"><span class="token delimiter important">&lt;?php</span><br>  <span class="token operator">...</span><br><br>  <span class="token variable">$user</span> <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">User</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>  <span class="token variable">$user</span><span class="token operator">-></span><span class="token function">setName</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'Foo'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>  <span class="token variable">$user</span><span class="token operator">-></span><span class="token function">setEmail</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'foo@bar.co'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><br>  <span class="token variable">$em</span> <span class="token operator">=</span> <span class="token variable">$this</span><span class="token operator">-></span><span class="token function">getDoctrine</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-></span><span class="token function">getEntityManager</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>  <span class="token variable">$em</span><span class="token operator">-></span><span class="token function">persist</span><span class="token punctuation">(</span><span class="token variable">$user</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>  <span class="token variable">$em</span><span class="token operator">-></span><span class="token function">flush</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><br>  <span class="token operator">...</span></code></pre>
<p>By adding following helper method into our <code>BaseEntity</code> we can shorten it from 3 lines to 1:</p>
<pre class="language-php"><code class="language-php"><span class="token php language-php"><span class="token delimiter important">&lt;?php</span> <span class="token keyword">namespace</span> <span class="token package">Foo<span class="token punctuation">\</span>Bar<span class="token punctuation">\</span>Entity</span><span class="token punctuation">;</span><br><br><span class="token keyword">use</span> <span class="token package">Doctrine<span class="token punctuation">\</span>ORM<span class="token punctuation">\</span>Mapping</span> <span class="token keyword">as</span> <span class="token constant">ORM</span><span class="token punctuation">;</span><br><br><span class="token comment">/**<br> * @ORM\HasLifecycleCallbacks<br> * @ORM\MappedSuperclass<br> */</span><br><span class="token keyword">class</span> <span class="token class-name-definition class-name">BaseEntity</span> <span class="token punctuation">{</span><br>    <span class="token operator">...</span><br><br>    <span class="token comment">/**<br>     * Helper method<br>     *<br>     * @param Doctrine\ORM\EntityManager $em<br>     * @throws \RunTimeException<br>     * @return void<br>     */</span><br>    <span class="token keyword">protected</span> <span class="token keyword">function</span> <span class="token function-definition function">save</span><span class="token punctuation">(</span><span class="token class-name type-declaration">EntityManager</span> <span class="token variable">$em</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>      <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token variable">$em</span> <span class="token keyword">instanceof</span> <span class="token class-name">EntityManager</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>        <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name class-name-fully-qualified"><span class="token punctuation">\</span>RunTimeException</span><span class="token punctuation">(</span><br>          <span class="token function">sprintf</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'Expected an instance of  Doctrine\ORM\EntityManager but got "%s"'</span><span class="token punctuation">,</span> <span class="token function">gettype</span><span class="token punctuation">(</span><span class="token variable">$em</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">400</span><br>        <span class="token punctuation">)</span><span class="token punctuation">;</span><br>      <span class="token punctuation">}</span><br><br>      <span class="token variable">$em</span><span class="token operator">-></span><span class="token function">persist</span><span class="token punctuation">(</span><span class="token variable">$this</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>      <span class="token variable">$em</span><span class="token operator">-></span><span class="token function">flush</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>    <span class="token punctuation">}</span><br><br>    <span class="token operator">...</span></code></pre>
<p>Now we can simply use the <code>save</code> method inside our controller:</p>
<pre class="language-php"><code class="language-php"><span class="token php language-php"><span class="token delimiter important">&lt;?php</span><br>  <span class="token operator">...</span><br>  <span class="token variable">$user</span> <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">User</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>  <span class="token variable">$user</span><span class="token operator">-></span><span class="token function">setName</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'Foo'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>  <span class="token variable">$user</span><span class="token operator">-></span><span class="token function">setEmail</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'foo@bar.co'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><br>  <span class="token variable">$user</span><span class="token operator">-></span><span class="token function">save</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>  <span class="token operator">...</span></code></pre>
<pre class="language-php"><code class="language-php">  <span class="token operator">...</span><br>  <span class="token variable">$addr</span> <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Address</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>  <span class="token variable">$addr</span><span class="token operator">-></span><span class="token function">setProperty</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'123'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>  <span class="token variable">$addr</span><span class="token operator">-></span><span class="token function">setStreet</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'Foo Road'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>  <span class="token variable">$addr</span><span class="token operator">-></span><span class="token function">setTown</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'Fondon'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><br>  <span class="token variable">$addr</span><span class="token operator">-></span><span class="token function">save</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>  <span class="token operator">...</span></code></pre>
<p>I hope that this was useful for anyone refactoring their Symfony2 project. Here is the complete <a href="https://gist.github.com/jabranr/e74b80958a997ffc62b8f8173b7a1e3e">BaseEntity class as a Gist</a>. Feel free to suggest any enhancements.</p>

    </section>

    
      <section class="more-pagination">
        <h3 class="more-pagination_heading">More articles</h3>
        <section class="more-pagination_content">
          <a rel="prev" class="more-pagination_prev" href="/articles/secret-sauces-of-git/"><span class="more-pagination_guide">&laquo;</span> Secret sauces of Git</a>
          <a rel="next" class="more-pagination_next" href="/projects/php-curl/">PHP library for cURL <span class="more-pagination_guide">&raquo;</span></a>
        </section>
      </section>
    
  </section>
</section>
</main>
      <footer class="footer container-fluid">
        <div class="container footer_inner">
          <div>
            <p>&copy; 2012 &ndash; present</p>
            <div class="colophone bullets">
              <a target="_blank" rel="noopener noreferrer" href="https://www.twitter.com/jabranr">Twitter</a>
              <a target="_blank" rel="noopener noreferrer" href="https://github.com/jabranr">GitHub</a>
              <a target="_blank" rel="noopener noreferrer" href="https://google.com/mapmaker?gw=66&amp;uid=208599960765438642668">Google Map Maker</a>
              <a href="mailto:hello@jabran.me">Contact</a>
              <a href="/sitemap.xml">RSS</a>
            </div>
            <p><span class="heart">&hearts;</span> I like to develop on ideas that are useful and beneficial to everyone. All contents and code samples are licensed under the MIT License unless stated otherwise.</p>
            <hr />
            <p>This website uses cookies to deliver better user experience. By continuing to use this website you agree to the use of cookies.</p>
          </div>
          
        </div>
      </footer>
    </div>
    
  </body>
</html>
